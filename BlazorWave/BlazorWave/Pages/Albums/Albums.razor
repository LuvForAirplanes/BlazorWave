@page "/albums/albums"
@using Microsoft.AspNetCore.Http.Extensions
@using BlazorWave.Data.Models
@inject BlazorWave.Services.AlbumsService albumsService
@inject NavigationManager NavigationManager

<style>
    .album-box {
        width:120px;
        height:160px;
        margin:20px;
    }

    .ui.grid {
        margin-top:20px !important;
    }

    h1 {
        margin-top:0;
    }
</style>

<h1>Albums</h1>
<button class="ui button" @onclick="OnClick">Add Album</button>

<div class="ui grid">
    @foreach (var album in albums)
    {
        <div class="album-box">
            <img />
            @album.Title
        </div>
    }
</div>

@code {
    List<Album> albums = new List<Album>();

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        albums = await albumsService.ListAsync();

        StateHasChanged();
    }

    void OnClick()
    {
        NavigationManager.NavigateTo("/albums/add");
    }
}
